<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drift â€” Reis Anders</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=DM+Serif+Display&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Landing Screen -->
    <div id="landing" class="screen active">
        <div class="landing-content">
            <div class="logo-mark">
                <span class="logo-icon">â—‡</span>
            </div>
            <h1 class="app-title">Drift</h1>
            <p class="app-tagline">Reis anders. Ontdek echt.</p>

            <div class="mode-cards">
                <button class="mode-card" onclick="showScreen('notourist')">
                    <div class="mode-icon">ğŸ§­</div>
                    <h2>No Tourist Mode</h2>
                    <p>Micro-trip curator voor authentieke plekken die je nergens in een reisgids vindt.</p>
                    <span class="mode-arrow">â†’</span>
                </button>

                <button class="mode-card" onclick="showScreen('drift')">
                    <div class="mode-icon">ğŸ²</div>
                    <h2>90-Min Drift</h2>
                    <p>Geef controle op. Loop, observeer, ontdek. Anti-perfectionisme in actie.</p>
                    <span class="mode-arrow">â†’</span>
                </button>

                <button class="mode-card" onclick="showScreen('craving')">
                    <div class="mode-icon">ğŸ”</div>
                    <h2>Ik heb zin in...</h2>
                    <p>Typ wat je wilt â€” koffie, bier, taart â€” en vind de beste plek bij je in de buurt.</p>
                    <span class="mode-arrow">â†’</span>
                </button>

                <button class="mode-card trending-card-landing" onclick="showScreen('trending')">
                    <div class="mode-icon">ğŸ”¥</div>
                    <h2>Trending Now</h2>
                    <p>Plekken waar locals het nu over hebben. Via Reddit, Foursquare en social buzz.</p>
                    <span class="mode-arrow">â†’</span>
                </button>

                <button class="mode-card localfood-card-landing" onclick="showScreen('local-food')">
                    <div class="mode-icon">ğŸ´</div>
                    <h2>Lokale Gerechten</h2>
                    <p>Wat MOET je proeven? De beste lokale gerechten en waar je ze authentiek eet.</p>
                    <span class="mode-arrow">â†’</span>
                </button>
            </div>

            <button class="random-tip-trigger" onclick="showRandomTip()">
                <span class="trigger-icon">âœ¦</span>
                <span>Verras me</span>
            </button>
        </div>
    </div>

    <!-- No Tourist Mode Screen -->
    <div id="notourist" class="screen">
        <header class="screen-header">
            <button class="back-btn" onclick="goBackFromNoTourist()">â† Terug</button>
            <h2>ğŸ§­ No Tourist Mode</h2>
        </header>

        <div class="screen-content">
            <div class="input-section">
                <h3>Vertel me over je trip</h3>

                <div class="form-group">
                    <label>Stad</label>
                    <button class="location-btn" id="use-location-btn" onclick="useMyLocation()">
                        <span id="location-btn-text">ğŸ“ Gebruik mijn locatie</span>
                        <span id="location-btn-loader" style="display:none;">ğŸ“ Locatie zoeken...</span>
                    </button>
                    <div class="city-selector">
                        <button class="city-btn active" data-city="cologne">Keulen</button>
                        <button class="city-btn" data-city="amsterdam">Amsterdam</button>
                        <button class="city-btn" data-city="antwerp">Antwerpen</button>
                        <button class="city-btn" data-city="lisbon">Lissabon</button>
                        <button class="city-btn" data-city="newcastle">Newcastle</button>
                        <button class="city-btn" data-city="tallinn">Tallinn</button>
                    </div>
                </div>

                <div class="form-group">
                    <label>Wijk / Gebied</label>
                    <select id="neighborhood" class="form-select">
                        <option value="">Kies een wijk...</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Aantal dagen</label>
                    <div class="stepper">
                        <button class="stepper-btn" onclick="adjustDays(-1)">âˆ’</button>
                        <span id="days-count">2</span>
                        <button class="stepper-btn" onclick="adjustDays(1)">+</button>
                    </div>
                </div>

                <div class="form-group">
                    <label>Energielevel</label>
                    <div class="energy-selector">
                        <button class="energy-btn" data-energy="chill">ğŸ˜Œ Chill</button>
                        <button class="energy-btn active" data-energy="balanced">âš¡ Balanced</button>
                        <button class="energy-btn" data-energy="explorer">ğŸ”¥ Explorer</button>
                    </div>
                </div>

                <div class="form-group">
                    <label>Budget per dag</label>
                    <div class="budget-selector">
                        <button class="budget-btn" data-budget="low">â‚¬ Low</button>
                        <button class="budget-btn active" data-budget="mid">â‚¬â‚¬ Mid</button>
                        <button class="budget-btn" data-budget="high">â‚¬â‚¬â‚¬ High</button>
                    </div>
                </div>

                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="avoid-tourist" checked>
                        <span class="checkmark"></span>
                        Vermijd standaard toeristenroutes
                    </label>
                </div>

                <button class="generate-btn" onclick="generateTrip()">
                    <span class="btn-text">Genereer mijn micro-trip</span>
                    <span class="btn-loader" style="display:none;">
                        <span class="dot"></span><span class="dot"></span><span class="dot"></span>
                    </span>
                </button>
            </div>

            <!-- Results -->
            <div id="trip-results" class="trip-results" style="display:none;">
                <div class="results-header">
                    <h3>Jouw micro-trip</h3>
                    <p class="results-subtitle" id="results-subtitle"></p>
                </div>
                <div id="trip-cards" class="trip-cards"></div>
                <button class="shuffle-btn" onclick="generateTrip()">ğŸ”„ Shuffle â€” geef me andere plekken</button>
            </div>
        </div>
    </div>

    <!-- 90-Minute Drift Mode Screen -->
    <div id="drift" class="screen">
        <header class="screen-header">
            <button class="back-btn" onclick="showScreen('landing')">â† Terug</button>
            <h2>ğŸ² 90-Min Drift</h2>
        </header>

        <div class="screen-content">
            <div id="drift-intro" class="drift-intro">
                <div class="drift-manifesto">
                    <h3>De regels van de Drift</h3>
                    <p>Geen plan. Geen reviews. Geen perfectie.<br>
                    Alleen jij, de stad, en het toeval.</p>

                    <div class="drift-rules">
                        <div class="rule">
                            <span class="rule-number">01</span>
                            <span class="rule-text">Loop. Niet scrollen.</span>
                        </div>
                        <div class="rule">
                            <span class="rule-number">02</span>
                            <span class="rule-text">Ga waar de locals zijn.</span>
                        </div>
                        <div class="rule">
                            <span class="rule-number">03</span>
                            <span class="rule-text">Bestel iets dat je niet kent.</span>
                        </div>
                        <div class="rule">
                            <span class="rule-number">04</span>
                            <span class="rule-text">Schrijf op. Niet fotograferen.</span>
                        </div>
                    </div>
                </div>

                <div class="drift-location-toggle">
                    <label class="checkbox-label">
                        <input type="checkbox" id="drift-use-location">
                        <span class="checkmark"></span>
                        ğŸ“ Gebruik mijn locatie voor slimmere uitdagingen
                    </label>
                    <p class="toggle-hint">De app weet dan waar je bent en geeft hints over plekken in de buurt.</p>
                </div>

                <button class="drift-start-btn" onclick="startDrift()">
                    Start de Drift
                </button>
            </div>

            <!-- Drift Active -->
            <div id="drift-active" class="drift-active" style="display:none;">
                <div class="drift-timer-section">
                    <div class="timer-ring">
                        <svg viewBox="0 0 200 200">
                            <circle class="timer-bg" cx="100" cy="100" r="90"/>
                            <circle class="timer-progress" id="timer-progress" cx="100" cy="100" r="90"/>
                        </svg>
                        <div class="timer-display">
                            <span id="timer-minutes">90</span>
                            <span class="timer-label">min</span>
                        </div>
                    </div>
                </div>

                <div id="drift-current-step" class="drift-step-card">
                    <!-- Current step content loaded dynamically -->
                </div>

                <div class="drift-progress">
                    <div class="progress-dots" id="progress-dots"></div>
                </div>

                <div class="drift-controls">
                    <button class="drift-next-btn" id="drift-next-btn" onclick="nextDriftStep()">
                        Volgende stap â†’
                    </button>
                    <button class="drift-pause-btn" onclick="togglePause()">
                        <span id="pause-text">â¸ Pauzeer</span>
                    </button>
                </div>

                <!-- Observation Journal -->
                <div class="journal-section">
                    <h4>ğŸ“ Je observaties</h4>
                    <div id="observations" class="observations">
                        <div class="observation-slot" data-index="0">
                            <span class="obs-number">1.</span>
                            <input type="text" class="obs-input" placeholder="Wat valt je op?" oninput="saveObservation(0, this.value)">
                        </div>
                        <div class="observation-slot" data-index="1">
                            <span class="obs-number">2.</span>
                            <input type="text" class="obs-input" placeholder="Wat hoor je?" oninput="saveObservation(1, this.value)">
                        </div>
                        <div class="observation-slot" data-index="2">
                            <span class="obs-number">3.</span>
                            <input type="text" class="obs-input" placeholder="Wat voel je?" oninput="saveObservation(2, this.value)">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Drift Complete -->
            <div id="drift-complete" class="drift-complete" style="display:none;">
                <div class="complete-header">
                    <span class="complete-icon">âœ¨</span>
                    <h3>Drift voltooid</h3>
                    <p>Je hebt 90 minuten echt geleefd.</p>
                </div>
                <div class="complete-summary" id="complete-summary"></div>
                <button class="drift-start-btn" onclick="resetDrift()">Nog een Drift</button>
            </div>
        </div>
    </div>

    <!-- "Ik heb zin in..." Craving Screen -->
    <div id="craving" class="screen">
        <header class="screen-header">
            <button class="back-btn" onclick="showScreen('landing')">â† Terug</button>
            <h2>ğŸ” Ik heb zin in...</h2>
        </header>

        <div class="screen-content">
            <div class="craving-section">
                <h3>Waar heb je trek in?</h3>

                <div class="craving-input-wrap">
                    <input type="text" id="craving-input" class="craving-input" placeholder="koffie, bier, taart, boeken..." autocomplete="off" enterkeyhint="search">
                    <button class="craving-search-btn" onclick="searchCraving()">Zoek</button>
                </div>

                <div class="quick-picks">
                    <button class="pick-chip" onclick="quickCraving('koffie')">â˜• Koffie</button>
                    <button class="pick-chip" onclick="quickCraving('bier')">ğŸº Bier</button>
                    <button class="pick-chip" onclick="quickCraving('taart')">ğŸ° Taart</button>
                    <button class="pick-chip" onclick="quickCraving('eten')">ğŸ½ï¸ Eten</button>
                    <button class="pick-chip" onclick="quickCraving('ijs')">ğŸ¦ IJs</button>
                    <button class="pick-chip" onclick="quickCraving('wijn')">ğŸ· Wijn</button>
                    <button class="pick-chip" onclick="quickCraving('brood')">ğŸ¥– Brood</button>
                    <button class="pick-chip" onclick="quickCraving('cocktail')">ğŸ¸ Cocktail</button>
                </div>

                <div id="craving-status" class="craving-status" style="display:none;">
                    <span class="craving-loader">
                        <span class="dot"></span><span class="dot"></span><span class="dot"></span>
                    </span>
                    <span id="craving-status-text">Plekken zoeken in de buurt...</span>
                </div>

                <div id="craving-results" class="craving-results" style="display:none;">
                    <div class="craving-results-header">
                        <h4 id="craving-results-title"></h4>
                        <p id="craving-results-subtitle" class="results-subtitle"></p>
                    </div>
                    <div id="craving-cards" class="trip-cards"></div>
                    <a id="craving-maps-link" class="craving-maps-fallback" href="#" target="_blank" rel="noopener">
                        Meer resultaten op Google Maps â†’
                    </a>
                </div>

                <div id="craving-error" class="craving-error" style="display:none;">
                    <p id="craving-error-text"></p>
                    <a id="craving-error-maps" class="craving-maps-fallback" href="#" target="_blank" rel="noopener">
                        Zoek op Google Maps â†’
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- ğŸ”¥ Trending Now Screen -->
    <div id="trending" class="screen">
        <header class="screen-header">
            <button class="back-btn" onclick="showScreen('landing')">â† Terug</button>
            <h2>ğŸ”¥ Trending Now</h2>
        </header>

        <div class="screen-content">
            <div class="trending-section">
                <h3>Wat is er hot?</h3>
                <p class="trending-intro">Plekken waar de afgelopen week veel over gepraat wordt op Reddit en Foursquare.</p>

                <details class="score-explainer">
                    <summary>ğŸ“Š Hoe werkt de score?</summary>
                    <div class="score-explainer-content">
                        <p>Elke plek krijgt een score van 0â€“100, gebaseerd op echte data:</p>
                        <ul>
                            <li><strong>Vermeldingen</strong> â€” hoe vaak de plek wordt genoemd in Reddit-posts (Ã—12 punten per keer)</li>
                            <li><strong>Upvotes</strong> â€” hoeveel upvotes die posts kregen (Ã·8)</li>
                            <li><strong>Reacties</strong> â€” hoeveel discussie er was (Ã·15)</li>
                            <li><strong>Multi-thread bonus</strong> â€” +15 als de plek in meerdere threads opduikt</li>
                            <li><strong>Foursquare populariteit</strong> â€” gebaseerd op check-ins en trending status</li>
                        </ul>
                        <p>Hoe hoger de score, hoe meer buzz. <span class="score-legend"><span class="legend-dot hot"></span> 70+ = hot <span class="legend-dot warm"></span> 50-70 = warm <span class="legend-dot mild"></span> &lt;50 = nieuw signaal</span></p>
                    </div>
                </details>

                <div class="trending-city-selector">
                    <button class="trending-city-btn active" data-trending-city="cologne">Keulen</button>
                    <button class="trending-city-btn" data-trending-city="amsterdam">Amsterdam</button>
                    <button class="trending-city-btn" data-trending-city="antwerp">Antwerpen</button>
                    <button class="trending-city-btn" data-trending-city="lisbon">Lissabon</button>
                    <button class="trending-city-btn" data-trending-city="newcastle">Newcastle</button>
                    <button class="trending-city-btn" data-trending-city="tallinn">Tallinn</button>
                </div>

                <button class="location-btn trending-location-btn" id="trending-location-btn" onclick="trendingUseLocation()">
                    <span id="trending-location-text">ğŸ“ Gebruik mijn locatie</span>
                </button>

                <div class="trending-category-filter">
                    <button class="trending-filter-btn active" data-filter="all">Alles</button>
                    <button class="trending-filter-btn" data-filter="food">ğŸ´ Food</button>
                    <button class="trending-filter-btn" data-filter="music">ğŸµ Muziek</button>
                    <button class="trending-filter-btn" data-filter="clubs">ğŸ§ Clubs</button>
                    <button class="trending-filter-btn" data-filter="culture">ğŸ¨ Kunst</button>
                </div>

                <div id="trending-loading" class="trending-loading" style="display:none;">
                    <span class="craving-loader">
                        <span class="dot"></span><span class="dot"></span><span class="dot"></span>
                    </span>
                    <span>Trending data laden...</span>
                </div>

                <div id="discovery-section" class="discovery-section" style="display:none;">
                    <!-- Dynamically populated by renderDiscoverySection() -->
                </div>

                <div id="trending-results" class="trending-results" style="display:none;">
                    <div class="trending-results-header">
                        <h4 id="trending-results-title"></h4>
                        <p id="trending-last-updated" class="trending-meta"></p>
                    </div>
                    <div id="trending-cards" class="trip-cards"></div>
                </div>

                <div id="trending-error" class="craving-error" style="display:none;">
                    <p id="trending-error-text">Trending data niet beschikbaar.</p>
                    <a class="craving-maps-fallback" href="https://www.reddit.com" target="_blank" rel="noopener">
                        Bekijk Reddit voor lokale tips â†’
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- ğŸ´ Local Food Screen -->
    <div id="local-food" class="screen">
        <header class="screen-header">
            <button class="back-btn" onclick="showScreen('landing')">â† Terug</button>
            <h2>ğŸ´ Lokale Gerechten</h2>
        </header>

        <div class="screen-content">
            <div class="localfood-section">
                <h3>Wat MOET je proeven?</h3>
                <p class="localfood-intro">De iconische gerechten van elke stad â€” en waar je de beste, meest authentieke versie eet. Geen toeristenvallen, alleen de echte deal.</p>

                <div class="localfood-city-selector">
                    <button class="localfood-city-btn active" data-food-city="cologne">Keulen</button>
                    <button class="localfood-city-btn" data-food-city="amsterdam">Amsterdam</button>
                    <button class="localfood-city-btn" data-food-city="antwerp">Antwerpen</button>
                    <button class="localfood-city-btn" data-food-city="lisbon">Lissabon</button>
                    <button class="localfood-city-btn" data-food-city="newcastle">Newcastle</button>
                    <button class="localfood-city-btn" data-food-city="tallinn">Tallinn</button>
                </div>

                <div id="localfood-results" class="localfood-results">
                    <!-- Dish cards loaded dynamically -->
                </div>
            </div>
        </div>
    </div>

    <!-- Random Tip Modal (Bottom Sheet) -->
    <div id="random-tip-modal" class="tip-modal" style="display:none;">
        <div class="tip-backdrop" onclick="dismissRandomTip()"></div>
        <div class="tip-sheet">
            <div class="tip-handle"></div>
            <div class="tip-label">âœ¦ Random Tip</div>
            <div id="tip-content" class="tip-content">
                <!-- Dynamically populated -->
            </div>
            <div class="tip-actions">
                <button class="tip-another-btn" onclick="nextRandomTip()">Nog een âœ¦</button>
                <button class="tip-close-btn" onclick="dismissRandomTip()">Sluiten</button>
            </div>
        </div>
    </div>

    <!-- Trending Bij Jou â€” Floating Alert -->
    <div id="trending-bij-jou" class="trending-alert" style="display:none;">
        <!-- Dynamically populated by renderTrendingAlert() -->
    </div>

    <script src="data.js"></script>
    <script src="app.js"></script>
</body>
</html>
